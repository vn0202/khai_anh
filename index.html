<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chúc Mừng 20/10 - Gửi Em Yêu 💖</title>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap");
        *{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif}
        body{
            background:linear-gradient(135deg,#ffcee6 0%,#ffd6f1 50%,#e4f9ff 100%);
            min-height:100vh;overflow-x:hidden;position:relative
        }
        .confetti{position:fixed;width:100%;height:100%;z-index:-1;pointer-events:none}
        .confetti-piece{position:absolute;width:10px;height:10px;background:#ffd1f9;top:-20px;opacity:0}
        .scrapbook-bg{position:fixed;inset:0;opacity:.7;z-index:-1;
            background-image:url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='11' cy='18' r='7' fill='%23ff9eda' fill-opacity='.2'/%3E%3C/svg%3E")}
        .memory-lane-container{max-width:1200px;margin:0 auto;padding:2rem}
        .header{text-align:center;margin-bottom:3rem;animation:float 3s ease-in-out infinite}
        .header h1{font-size:3rem;color:#ff4e91;margin-bottom:1rem;font-family:"Pacifico",cursive;text-shadow:3px 3px 0 rgba(255,165,213,.5);animation:heartbeat 1.5s ease-in-out infinite}
        .header p{font-size:1.2rem;color:#8858a3;max-width:700px;margin:0 auto;line-height:1.6;background:rgba(255,255,255,.5);padding:1rem;border-radius:20px;box-shadow:0 5px 15px rgba(255,105,180,.2)}
        .gallery{display:flex;overflow-x:auto;gap:1.5rem;padding:1.5rem 0;scroll-behavior:smooth}
        .gallery::-webkit-scrollbar{height:8px}
        .gallery::-webkit-scrollbar-thumb{background:#ff6ec4;border-radius:10px}

        .memory-card{
            position:relative;flex:0 0 auto;width:300px;height:400px;border-radius:20px;overflow:hidden;
            border:8px solid #fff;box-shadow:0 10px 25px rgba(255,105,180,.3);
            opacity:0;transform:translateY(50px) rotate(var(--rotate,0deg));
            transition:all .8s cubic-bezier(.175,.885,.32,1.275)
        }
        .memory-card.visible{opacity:1;transform:translateY(0) rotate(var(--rotate,0deg))}
        .memory-img{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}

        /* chỉnh caption thấp hơn và trong suốt hơn */
        .memory-caption{
            position:absolute;left:0;bottom:-100%;width:100%;padding:.8rem;
            background:rgba(255,105,180,.8);color:#fff;border-radius:0 0 15px 15px;
            font-size:.95rem;transition:bottom .7s ease,opacity .7s ease;opacity:0;
            height:30%;display:flex;align-items:center;justify-content:center;text-align:center;
        }

        .memory-card.active .memory-caption{bottom:0;opacity:1}
        .memory-card.active .memory-img{transform:scale(1.05)}
        .card-tape{position:absolute;width:100px;height:35px;background:rgba(255,255,255,.8);top:-15px;left:50%;transform:translateX(-50%) rotate(var(--rotate,2deg));z-index:2}
        .card-sticker{position:absolute;width:40px;height:40px;bottom:10px;right:10px;z-index:3}
        .balloon{position:fixed;width:60px;height:70px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#ff7eb9,#ff1493);animation:floatUp 15s linear infinite;z-index:-1}
        .balloon::before{content:"";position:absolute;width:2px;height:80px;background:rgba(0,0,0,.2);top:100%;left:50%}
        @keyframes floatUp{0%{transform:translateY(100vh)}100%{transform:translateY(-100vh)}}
        @keyframes heartbeat{0%,50%,100%{transform:scale(1)}25%,75%{transform:scale(1.05)}}
        @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
        .sound-toggle{
            position:fixed;right:16px;bottom:16px;height:44px;min-width:44px;border-radius:999px;border:none;
            background:linear-gradient(45deg,#ff6ec4,#7873f5);color:#fff;padding:0 14px;cursor:pointer;
            display:flex;align-items:center;gap:8px;box-shadow:0 6px 18px rgba(255,110,196,.5);
            font-weight:600
        }
    </style>
</head>
<body>
<div class="scrapbook-bg"></div>
<div class="confetti" id="confetti-container"></div>

<!-- Bóng bay -->
<div class="balloon" style="left:10%;animation-duration:18s"></div>
<div class="balloon" style="left:30%;animation-duration:20s;animation-delay:3s"></div>
<div class="balloon" style="left:60%;animation-duration:17s;animation-delay:1s"></div>
<div class="balloon" style="left:80%;animation-duration:22s;animation-delay:5s"></div>

<div class="memory-lane-container">
    <div class="header">
        <h1>Happy Vietnamese Women's Day 20/10 💖</h1>
        <p>Gửi đến em – cô gái tuyệt vời nhất trong lòng anh.
            Chúc em luôn xinh đẹp, hạnh phúc và rạng rỡ như nụ cười mỗi khi anh nhìn thấy em! 💐</p>
    </div>
    <div class="gallery" id="memoryGallery"></div>
</div>
<audio id="bgm" src="love.mp3" loop></audio>
<button id="soundBtn" class="sound-toggle" aria-pressed="false" title="Bật/Tắt nhạc">
    <span>Nhạc</span> 🔊
</button>
<script>
    window.addEventListener("DOMContentLoaded", () => {
        const audio = document.getElementById("bgm");
        const btn=document.getElementById("soundBtn");

        console.log("ok");

        // Thử phát sau khi load 1s
        btn.addEventListener("click",()=>{
            if(audio.paused){ audio.muted=false; audio.play().catch(()=>{}); }
            else { audio.muted=!audio.muted; if(!audio.muted){ audio.play().catch(()=>{}); } }
        });
    });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
<script>
    gsap.registerPlugin(ScrollTrigger);

    const memories=[
        {image:"1.jpeg",caption:"Em chính là món quà ngọt ngào nhất của cuộc đời anh 💖",rotationAngle:-2,emoji:"💝"},
        {image:"2.jpeg",caption:"Chúc em 20/10 luôn xinh đẹp, hạnh phúc và rạng rỡ như ánh mặt trời ☀️",rotationAngle:3,emoji:"🌸"},
        {image:"3.jpeg",caption:"Cảm ơn em vì luôn ở bên, dịu dàng và yêu thương anh mỗi ngày 🌷",rotationAngle:-1,emoji:"💐"},
        {image:"6.jpeg",caption:"Mỗi khoảnh khắc bên em đều là điều anh trân quý nhất 💞",rotationAngle:2,emoji:"💫"},
        {image:"5.jpeg",caption:"Chúc em một ngày 20/10 thật nhiều niềm vui và tiếng cười 💕",rotationAngle:-3,emoji:"🌹"},
        {image:"7.jpeg",caption:"Vì em mà thế giới này trở nên đáng yêu hơn rất nhiều 💓",rotationAngle:1,emoji:"🌈"},
        {image:"3.jpeg",caption:"Anh mong được cùng em đi qua thêm thật nhiều 20/10 nữa 🌻",rotationAngle:-2,emoji:"🎁"},
        {image:"1.jpeg",caption:"Em luôn là cô gái tuyệt vời nhất trong lòng anh 💗",rotationAngle:2,emoji:"🌼"},
        {image:"2.jpeg",caption:"Yêu em hơn tất cả những gì anh có thể nói ra bằng lời 💞",rotationAngle:-1,emoji:"💋"},
        {image:"5.jpeg",caption:"20/10 vui vẻ nhé, cô gái anh yêu nhất trên đời này 💖",rotationAngle:3,emoji:"💐"}
    ];

    function createConfetti(){
        const c=document.getElementById("confetti-container");
        const colors=["#ff6ec4","#a485ff","#ff4e91","#c175ff","#75c6ff"];
        for(let i=0;i<100;i++){
            const p=document.createElement("div");
            p.className="confetti-piece";
            p.style.left=Math.random()*100+"vw";
            p.style.width=Math.random()*15+5+"px";
            p.style.height=Math.random()*15+5+"px";
            p.style.background=colors[Math.floor(Math.random()*colors.length)];
            p.style.borderRadius=Math.random()>0.5?"50%":"0";
            p.style.transform=`rotate(${Math.random()*360}deg)`;
            const dur=Math.random()*3+3,delay=Math.random()*5;
            p.style.animation=`floatDown ${dur}s ease-in ${delay}s infinite`;
            p.style.opacity=Math.random();
            c.appendChild(p);
        }
    }

    document.addEventListener("DOMContentLoaded",()=>{
        createConfetti();
        const gallery=document.getElementById("memoryGallery");
        memories.forEach((m,i)=>{
            const card=document.createElement("div");
            card.className="memory-card";
            card.style.setProperty("--rotate",`${m.rotationAngle}deg`);
            card.innerHTML=`
          <div class="card-tape" style="--rotate:${m.rotationAngle*2}deg"></div>
          <img class="memory-img" src="${m.image}" alt="Memory ${i+1}">
          <div class="memory-caption">${m.caption}</div>
          <div class="card-sticker">
            <svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="50" fill="#ff6ec4"/>
              <text x="50" y="65" font-family="Arial" font-size="40" text-anchor="middle" fill="white">${m.emoji}</text>
            </svg>
          </div>`;
            gallery.appendChild(card);
        });

        const cards=document.querySelectorAll(".memory-card");
        cards.forEach((c,i)=>setTimeout(()=>c.classList.add("visible"),400+i*150));

        let current=0;
        function setActiveCard(index){
            cards.forEach(c=>c.classList.remove("active"));
            const active=cards[index];
            if(active){setTimeout(()=>active.classList.add("active"),1000);}
        }

        setActiveCard(current);
        setInterval(()=>{
            if(!cards.length)return;
            current=(current+1)%cards.length;
            const cardRect=cards[current].getBoundingClientRect();
            const galleryRect=gallery.getBoundingClientRect();
            gallery.scrollTo({
                left:cards[current].offsetLeft-galleryRect.width/2+cardRect.width/2,
                behavior:"smooth"
            });
            setActiveCard(current);
        },3000);

        gsap.from(".header",{duration:1,y:-50,opacity:0,ease:"back.out(1.7)"});
    });
</script>
</body>
</html>
